<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://sandbox.web.squarecdn.com/v1/square.js"></script>
  </head>
  <body>
    <div id="card-container"></div>
    <script>
      const appId = 'sandbox-sq0idb-TS_Pu7AWE4PpzZ9NJKDHhA'; // Replace with your Square Sandbox Application ID
      const payments = Square.payments(appId, 'sandbox');

      async function initializeCard() {
        const card = await payments.card();
        await card.attach('#card-container');
        return card;
      }

      async function handlePayment() {
        const card = await initializeCard();
        const result = await card.tokenize();
        if (result.status === 'OK') {
          window.ReactNativeWebView.postMessage(JSON.stringify(result));
        } else {
          alert('Payment failed. Try again.');
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        window.ReactNativeWebView.postMessage('ready');
      });

      window.handlePayment = handlePayment;
    </script>
  </body>
</html>
